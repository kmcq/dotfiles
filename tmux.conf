# Tmux leader is C-a or C-space
unbind C-b
set -g prefix C-space
set -g prefix2 C-a

# Act like vim for moving between panes and windows
setw -g mode-keys vi
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R
bind-key -r C-h select-window -t :-
bind-key -r C-l select-window -t :+

# start window numbers at 1 to match keyboard order with tmux window order
set -g base-index 1
set-window-option -g pane-base-index 1

# Setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"

# smart pane switching with awareness of vim splits
bind -n C-h run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-h) || tmux select-pane -L"
bind -n C-j run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-j) || tmux select-pane -D"
bind -n C-k run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-k) || tmux select-pane -U"
bind -n C-l run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"
bind -n C-\ run "(tmux display-message -p '#{pane_current_command}' | grep -iq vim && tmux send-keys 'C-\\') || tmux select-pane -l"

# switch between last pane or last window if no panes
bind-key C-space if-shell 'test $(tmux list-panes | wc -l) -gt 1' 'last-pane' 'last-window'

# Mouse scroll automatically starts copy mode and scrolls
set-option -g mouse on

# ----------------------
# set some pretty colors
# ----------------------

# colorize messages in the command line
set-option -g message-bg black #base02
set-option -g message-fg brightred #orange

# no active pane highlighting
set-option -g pane-active-border-fg default

# ----------------------
# Status Bar
# -----------------------

set -g status-interval 1               # set update frequencey (default 15 seconds)
set -g status-justify centre           # center window list for clarity
set-option -g status-position top    # position the status bar at top of screen

# set color for status bar
set -g status-fg white
set-option -g status-bg default
set-option -g status-attr dim

# set window list color for active window
set-window-option -g window-status-current-fg red
set-window-option -g window-status-current-bg default
set-window-option -g window-status-current-attr bright
set-window-option -g window-status-current-format "[#[fg=white]#I:#W#F#[fg=red]]"

# show session name and git branch on left side of status bar
set -g status-left-length 100
set -g status-left "#S #[fg=cyan] (#(cd #{pane_current_path}; git rev-parse --abbrev-ref HEAD))"

# show date and time on right side of status bar
set -g status-right-length 120
set -g status-right "#[fg=blue]#(battery Charging)  #[fg=yellow]%b %d #[fg=green]%l:%M %p"
